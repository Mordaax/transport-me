Index: app/src/main/java/sg/edu/np/mad/transportme/MainActivity.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package sg.edu.np.mad.transportme;\r\n\r\nimport static android.Manifest.permission.ACCESS_COARSE_LOCATION;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.annotation.RequiresApi;\r\nimport androidx.core.app.ActivityCompat;\r\nimport androidx.fragment.app.Fragment;\r\nimport androidx.fragment.app.FragmentActivity;\r\nimport androidx.fragment.app.FragmentManager;\r\nimport androidx.fragment.app.FragmentTransaction;\r\nimport androidx.recyclerview.widget.LinearLayoutManager;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\n\r\nimport android.Manifest;\r\nimport android.annotation.SuppressLint;\r\nimport android.app.ProgressDialog;\r\nimport android.content.pm.PackageManager;\r\nimport android.location.Address;\r\nimport android.location.Geocoder;\r\nimport android.location.Location;\r\nimport android.location.LocationListener;\r\nimport android.location.LocationManager;\r\nimport android.os.Build;\r\nimport android.os.Bundle;\r\nimport android.util.Log;\r\nimport android.view.View;\r\nimport android.widget.FrameLayout;\r\nimport android.widget.LinearLayout;\r\nimport android.widget.Toast;\r\n\r\nimport com.google.android.gms.maps.CameraUpdate;\r\nimport com.google.android.gms.maps.CameraUpdateFactory;\r\nimport com.google.android.gms.maps.GoogleMap;\r\nimport com.google.android.gms.maps.OnMapReadyCallback;\r\nimport com.google.android.gms.maps.SupportMapFragment;\r\nimport com.google.android.gms.maps.model.CameraPosition;\r\nimport com.google.android.gms.maps.model.LatLng;\r\nimport com.google.android.gms.maps.model.MarkerOptions;\r\nimport com.google.android.material.bottomnavigation.BottomNavigationView;\r\n\r\nimport java.io.IOException;\r\nimport java.util.ArrayList;\r\nimport java.util.Collections;\r\nimport java.util.List;\r\n\r\n\r\npublic class MainActivity extends FragmentActivity implements OnMapReadyCallback  {\r\n\r\n    GoogleMap map;\r\n    LocationManager locationManager;\r\n    public static Double globalCloseness = 0.3;\r\n\r\n    public static Boolean favourite = false;\r\n    private static final String[] LOCATION_PERMS={\r\n            Manifest.permission.ACCESS_COARSE_LOCATION,\r\n            Manifest.permission.ACCESS_FINE_LOCATION\r\n    };\r\n\r\n    private static final int LOCATION_REQUEST=1337;\r\n\r\n    @RequiresApi(api = Build.VERSION_CODES.M)\r\n    @SuppressLint(\"MissingPermission\")\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n        ProgressDialog progressDialog = new ProgressDialog(MainActivity.this,R.style.MyAlertDialogStyle);\r\n        progressDialog.show();\r\n        progressDialog.setContentView(R.layout.progress_dialog);\r\n        progressDialog.getWindow().setBackgroundDrawableResource(\r\n                android.R.color.transparent\r\n        );\r\n\r\n        BottomNavigationView bottomNavigationView = findViewById(R.id.bottomNavigationView);\r\n        bottomNavigationView.setOnItemSelectedListener(item ->{\r\n            LinearLayout mapandrv = findViewById(R.id.MapAndRV);\r\n            FrameLayout fragmentlayout = findViewById(R.id.frame_layout);\r\n            switch(item.getItemId()){\r\n                case R.id.home:\r\n                    fragmentlayout.setVisibility(View.INVISIBLE);\r\n                    mapandrv.setVisibility(View.VISIBLE);\r\n                    favourite = false;\r\n                    break;\r\n                case R.id.favourites:\r\n                    mapandrv.setVisibility(View.INVISIBLE);\r\n                    fragmentlayout.setVisibility(View.VISIBLE);\r\n                    replaceFragment(new FavouritesFragment());\r\n                    favourite = true;\r\n                    break;\r\n                case R.id.search:\r\n                    mapandrv.setVisibility(View.INVISIBLE);\r\n                    fragmentlayout.setVisibility(View.VISIBLE);\r\n                    replaceFragment(new SearchFragment());\r\n                    break;\r\n                case R.id.mrtmap:\r\n                    mapandrv.setVisibility(View.INVISIBLE);\r\n                    fragmentlayout.setVisibility(View.VISIBLE);\r\n                    replaceFragment(new MrtMapFragment());\r\n                    break;\r\n                case R.id.profile:\r\n                    mapandrv.setVisibility(View.INVISIBLE);\r\n                    fragmentlayout.setVisibility(View.VISIBLE);\r\n                    replaceFragment(new ProfileFragment());\r\n                    break;\r\n\r\n            }\r\n            return true;\r\n        });\r\n\r\n\r\n        requestPermissions(LOCATION_PERMS, LOCATION_REQUEST);\r\n\r\n        SupportMapFragment mapFragment = (SupportMapFragment) getSupportFragmentManager().findFragmentById(R.id.mrtmap);\r\n        mapFragment.getMapAsync(this);\r\n        locationManager = (LocationManager) getSystemService(LOCATION_SERVICE);\r\n\r\n        ArrayList<BusStop> busStops = LoadingScreen.globalBusStops;\r\n\r\n        if (ActivityCompat.checkSelfPermission(this, Manifest.permission.ACCESS_FINE_LOCATION) != PackageManager.PERMISSION_GRANTED && ActivityCompat.checkSelfPermission(this, ACCESS_COARSE_LOCATION) != PackageManager.PERMISSION_GRANTED) {\r\n            // TODO: Consider calling\r\n            //    ActivityCompat#requestPermissions\r\n            // here to request the missing permissions, and then overriding\r\n            //   public void onRequestPermissionsResult(int requestCode, String[] permissions,\r\n            //                                          int[] grantResults)\r\n            // to handle the case where the user grants the permission. See the documentation\r\n            // for ActivityCompat#requestPermissions for more details.\r\n            Toast.makeText(MainActivity.this,\"Check Location and Connection Settings\",Toast.LENGTH_LONG).show();\r\n\r\n            return;\r\n        }\r\n        else{\r\n\r\n            if (locationManager.isProviderEnabled(LocationManager.GPS_PROVIDER)) {\r\n                locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 60000, 10, new LocationListener() {\r\n                    @Override\r\n                    public void onLocationChanged(@NonNull Location location) {\r\n                        Double Latitude = location.getLatitude();\r\n                        Double Longitude = location.getLongitude();\r\n                        LatLng latLng = new LatLng(Latitude, Longitude);\r\n                        Geocoder geocoder = new Geocoder(getApplicationContext());\r\n\r\n                        /* For testing purposes, Remove at the end */\r\n                    /*Latitude = 1.332346;\r\n                    Longitude = 103.777561;*/\r\n\r\n                        ArrayList<BusStop> closeBusStops = new ArrayList<>();\r\n                        for (int i = 0; i < busStops.size(); i++){\r\n                            BusStop busStop = busStops.get(i);\r\n                            busStop.distanceToLocation = DistanceCalculator.distanceBetween(busStop.Latitude,busStop.Longitude,Latitude,Longitude);\r\n\r\n                            if (busStop.distanceToLocation <= globalCloseness){\r\n                                closeBusStops.add(busStop);\r\n                                LatLng latlongmarker = new LatLng(busStop.Latitude, busStop.Longitude);\r\n                                map.addMarker(new MarkerOptions().position(latlongmarker).title(busStop.Description));\r\n                            }\r\n                        }\r\n                        if(closeBusStops.size() > 0){\r\n                            ApiBusStopService apiBusStopService = new ApiBusStopService(MainActivity.this);\r\n                            apiBusStopService.getBusService(closeBusStops,new ApiBusStopService.VolleyResponseListener2() {\r\n                                @Override\r\n                                public void onError(String message) {\r\n                                    Toast.makeText(MainActivity.this,\"Cannot Get Bus Stops, Check Location and Connection\",Toast.LENGTH_LONG).show();\r\n                                }\r\n                                @Override\r\n                                public void onResponse(ArrayList<BusStop> busStopsLoaded) {\r\n                                    Collections.sort(closeBusStops);\r\n\r\n                                    RecyclerView rv = findViewById(R.id.recyclerView);\r\n                                    BusStopAdapter adapter = new BusStopAdapter(busStopsLoaded,MainActivity.this);\r\n                                    LinearLayoutManager layout = new LinearLayoutManager(MainActivity.this);\r\n                                    rv.setAdapter(adapter);\r\n                                    rv.setLayoutManager(layout);\r\n                                    progressDialog.dismiss();\r\n                                }\r\n                            });\r\n                        }\r\n\r\n                        try {\r\n\r\n                            List<Address> addressList = geocoder.getFromLocation(Latitude, Longitude, 1);\r\n                            String str = addressList.get(0).getLocality()+\", \";\r\n                            str += addressList.get(0).getCountryName();\r\n\r\n                            map.moveCamera(CameraUpdateFactory.newLatLngZoom(latLng, 16.2f));\r\n                        } catch (IOException e){\r\n                            e.printStackTrace();\r\n                        }\r\n                    }\r\n                });\r\n            }\r\n            else if(locationManager.isProviderEnabled(LocationManager.NETWORK_PROVIDER)){\r\n                locationManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 60000, 10, new LocationListener() {\r\n                    @Override\r\n                    public void onLocationChanged(@NonNull Location location) {\r\n                        Double Latitude = location.getLatitude();\r\n                        Double Longitude = location.getLongitude();\r\n                        \r\n\r\n                        LatLng latLng = new LatLng(Latitude, Longitude);\r\n                        Geocoder geocoder = new Geocoder(getApplicationContext());\r\n\r\n\r\n\r\n                        ArrayList<BusStop> closeBusStops = new ArrayList<>();\r\n                        for (int i = 0; i < busStops.size(); i++){\r\n                            BusStop busStop = busStops.get(i);\r\n                            busStop.distanceToLocation = DistanceCalculator.distanceBetween(busStop.Latitude,busStop.Longitude,Latitude,Longitude);\r\n\r\n                            if (busStop.distanceToLocation <= globalCloseness){\r\n                                closeBusStops.add(busStop);\r\n                                LatLng latlongmarker = new LatLng(busStop.Latitude, busStop.Longitude);\r\n                                map.addMarker(new MarkerOptions().position(latlongmarker).title(busStop.Description));\r\n                            }\r\n                        }\r\n                        if(closeBusStops.size() > 0){\r\n                            ApiBusStopService apiBusStopService = new ApiBusStopService(MainActivity.this);\r\n                            apiBusStopService.getBusService(closeBusStops,new ApiBusStopService.VolleyResponseListener2() {\r\n                                @Override\r\n                                public void onError(String message) {\r\n                                    Toast.makeText(MainActivity.this,\"Cannot Get Bus Stops, Check Location and Connection\",Toast.LENGTH_LONG).show();\r\n                                }\r\n                                @Override\r\n                                public void onResponse(ArrayList<BusStop> busStopsLoaded) {\r\n\r\n                                    RecyclerView rv = findViewById(R.id.recyclerView);\r\n                                    BusStopAdapter adapter = new BusStopAdapter(busStopsLoaded,MainActivity.this);\r\n                                    LinearLayoutManager layout = new LinearLayoutManager(MainActivity.this);\r\n                                    rv.setAdapter(adapter);\r\n                                    rv.setLayoutManager(layout);\r\n                                    progressDialog.dismiss();\r\n                                }\r\n                            });\r\n                        }\r\n\r\n\r\n                        try {\r\n\r\n                            List<Address> addressList = geocoder.getFromLocation(Latitude, Longitude, 1);\r\n                            String str = addressList.get(0).getLocality()+\", \";\r\n                            str += addressList.get(0).getCountryName();\r\n                            map.moveCamera(CameraUpdateFactory.newLatLngZoom(latLng, 16.2f));\r\n                        } catch (IOException e){\r\n                            e.printStackTrace();\r\n                        }\r\n                    }\r\n                });\r\n            }\r\n        }\r\n\r\n\r\n\r\n    }\r\n    public void moveMapsCamera(Double latitude, Double longitude){\r\n        LatLng latlongmove = new LatLng(latitude, longitude);\r\n        CameraPosition cameraPosition = new CameraPosition.Builder()\r\n                .target(latlongmove)\r\n                .zoom(17f)\r\n                .build();\r\n        CameraUpdate cu = CameraUpdateFactory.newCameraPosition(cameraPosition);\r\n        map.animateCamera(cu);\r\n\r\n    }\r\n    private void replaceFragment(Fragment fragment){\r\n        FragmentManager fragmentManager = getSupportFragmentManager();\r\n        FragmentTransaction fragmentTransaction = fragmentManager.beginTransaction();\r\n        fragmentTransaction.replace(R.id.frame_layout,fragment);\r\n        fragmentTransaction.commit();\r\n    }\r\n\r\n    @SuppressLint(\"MissingPermission\")\r\n    @Override\r\n    public void onMapReady(@NonNull GoogleMap googleMap) {\r\n        map = googleMap;\r\n        map.setMyLocationEnabled(true);\r\n\r\n    }\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/sg/edu/np/mad/transportme/MainActivity.java b/app/src/main/java/sg/edu/np/mad/transportme/MainActivity.java
--- a/app/src/main/java/sg/edu/np/mad/transportme/MainActivity.java	(revision be793fce20e64009a4ea8f7d07aad3e9941bc482)
+++ b/app/src/main/java/sg/edu/np/mad/transportme/MainActivity.java	(date 1656034495635)
@@ -2,6 +2,8 @@
 
 import static android.Manifest.permission.ACCESS_COARSE_LOCATION;
 
+import static sg.edu.np.mad.transportme.LoginPage.globalCloseness;
+
 import androidx.annotation.NonNull;
 import androidx.annotation.RequiresApi;
 import androidx.core.app.ActivityCompat;
@@ -49,7 +51,7 @@
 
     GoogleMap map;
     LocationManager locationManager;
-    public static Double globalCloseness = 0.3;
+
 
     public static Boolean favourite = false;
     private static final String[] LOCATION_PERMS={
@@ -195,7 +197,7 @@
                     public void onLocationChanged(@NonNull Location location) {
                         Double Latitude = location.getLatitude();
                         Double Longitude = location.getLongitude();
-                        
+
 
                         LatLng latLng = new LatLng(Latitude, Longitude);
                         Geocoder geocoder = new Geocoder(getApplicationContext());
Index: app/src/main/res/layout/fragment_profile.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<ScrollView xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\"\r\n    tools:context=\".ProfileFragment\"\r\n    android:orientation=\"vertical\">\r\n\r\n    <LinearLayout\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:orientation=\"vertical\" >\r\n\r\n        <RelativeLayout\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"175dp\"\r\n            android:background=\"#E9B872\"\r\n            android:padding=\"20dp\">\r\n\r\n            <ImageView\r\n                android:id=\"@+id/AppSplashIcon\"\r\n                android:layout_width=\"75dp\"\r\n                android:layout_height=\"75dp\"\r\n                android:layout_centerVertical=\"true\"\r\n                android:src=\"@drawable/appsplashicon\"></ImageView>\r\n\r\n            <TextView\r\n                android:id=\"@+id/TransportMe\"\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_centerVertical=\"true\"\r\n                android:layout_marginLeft=\"10dp\"\r\n                android:layout_toRightOf=\"@id/AppSplashIcon\"\r\n                android:fontFamily=\"@font/inter_bold\"\r\n                android:includeFontPadding=\"false\"\r\n                android:text=\"TransportMe\"\r\n                android:textColor=\"@color/white\"\r\n                android:textSize=\"25dp\"></TextView>\r\n\r\n            <TextView\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_below=\"@id/TransportMe\"\r\n                android:layout_marginLeft=\"10dp\"\r\n                android:layout_toRightOf=\"@id/AppSplashIcon\"\r\n                android:text=\"Your Favourite Transport App\"\r\n                android:textColor=\"@color/white\"></TextView>\r\n        </RelativeLayout>\r\n\r\n        <LinearLayout\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:orientation=\"vertical\"\r\n            android:padding=\"20dp\">\r\n\r\n            <TextView\r\n                android:id=\"@+id/closeness\"\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:text=\"Bus Stop Closeness (300 Meters)\"\r\n                android:textSize=\"20sp\" />\r\n\r\n            <SeekBar\r\n                android:id=\"@+id/seekBar\"\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_marginTop=\"10dp\"\r\n                android:max=\"10\"\r\n                android:progress=\"3\" />\r\n\r\n            <com.google.android.material.textfield.TextInputLayout\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:hint=\"Full Name\">\r\n\r\n                <com.google.android.material.textfield.TextInputEditText\r\n                    android:id=\"@+id/profileuserName\"\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:layout_marginBottom=\"30dp\"\r\n                    android:background=\"@color/white\"\r\n                    android:drawableLeft=\"@drawable/ic_baseline_person_24\"\r\n                    android:drawablePadding=\"15dp\"\r\n                    android:fontFamily=\"@font/inter_bold\"\r\n                    android:clickable=\"false\"\r\n                    android:cursorVisible=\"false\"\r\n                    android:focusable=\"false\"\r\n                    android:focusableInTouchMode=\"false\"\r\n                    android:text=\"USERNAME PLACEHOLDER\" />\r\n\r\n            </com.google.android.material.textfield.TextInputLayout>\r\n\r\n            <com.google.android.material.textfield.TextInputLayout\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:hint=\"Email Address\">\r\n\r\n                <com.google.android.material.textfield.TextInputEditText\r\n                    android:id=\"@+id/profileuserEmail\"\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:layout_marginBottom=\"30dp\"\r\n                    android:background=\"@color/white\"\r\n                    android:drawableLeft=\"@drawable/ic_baseline_email_24\"\r\n                    android:drawablePadding=\"15dp\"\r\n                    android:fontFamily=\"@font/inter_bold\"\r\n                    android:clickable=\"false\"\r\n                    android:cursorVisible=\"false\"\r\n                    android:focusable=\"false\"\r\n                    android:focusableInTouchMode=\"false\"\r\n                    android:text=\"EMAIL PLACEHOLDER\" />\r\n\r\n            </com.google.android.material.textfield.TextInputLayout>\r\n\r\n            <com.google.android.material.textfield.TextInputLayout\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:hint=\"Password\">\r\n\r\n            </com.google.android.material.textfield.TextInputLayout>\r\n\r\n            <Button\r\n                android:id=\"@+id/editProfile\"\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_marginBottom=\"18dp\"\r\n                android:backgroundTint=\"#BA4C4F\"\r\n                android:fontFamily=\"@font/inter_bold\"\r\n                android:padding=\"16dp\"\r\n                android:text=\"Edit Profile\"\r\n                android:textColor=\"#FFFFFF\"\r\n                android:textColorHint=\"#FFFFFF\" />\r\n\r\n            <Button\r\n                android:id=\"@+id/signoutbutton\"\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_marginBottom=\"30dp\"\r\n                android:backgroundTint=\"#A63D40\"\r\n                android:fontFamily=\"@font/inter_bold\"\r\n                android:padding=\"16dp\"\r\n                android:text=\"sign out\"\r\n                android:textColor=\"#FFFFFF\"\r\n                android:textColorHint=\"#FFFFFF\" />\r\n\r\n        </LinearLayout>\r\n\r\n        <LinearLayout\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"172dp\"\r\n            android:background=\"#E9B872\"\r\n            android:orientation=\"vertical\">\r\n\r\n            <TextView\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_marginTop=\"15dp\"\r\n                android:fontFamily=\"@font/inter_bold\"\r\n                android:gravity=\"center\"\r\n                android:text=\"About Us\"\r\n                android:textColor=\"@color/white\"\r\n                android:textSize=\"20dp\" />\r\n\r\n            <TextView\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:fontFamily=\"@font/inter_bold\"\r\n                android:gravity=\"center\"\r\n                android:padding=\"20dp\"\r\n                android:text=\"TransportMe is a transport app made to provide users with data that helps ease the process of transportation, it is an app coded on Android Studios by 5 Ngee Ann Polytechnic Students\"\r\n                android:textColor=\"@color/white\" />\r\n\r\n\r\n        </LinearLayout>\r\n\r\n    </LinearLayout>\r\n\r\n\r\n</ScrollView>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/res/layout/fragment_profile.xml b/app/src/main/res/layout/fragment_profile.xml
--- a/app/src/main/res/layout/fragment_profile.xml	(revision be793fce20e64009a4ea8f7d07aad3e9941bc482)
+++ b/app/src/main/res/layout/fragment_profile.xml	(date 1656036183828)
@@ -57,7 +57,7 @@
                 android:id="@+id/closeness"
                 android:layout_width="match_parent"
                 android:layout_height="wrap_content"
-                android:text="Bus Stop Closeness (300 Meters)"
+                android:text="Bus Stop Radius (300 Meters)"
                 android:textSize="20sp" />
 
             <SeekBar
Index: app/src/main/java/sg/edu/np/mad/transportme/LoginPage.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package sg.edu.np.mad.transportme;\r\n\r\nimport static sg.edu.np.mad.transportme.LoadingScreen.globalBusStops;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\n\r\nimport android.content.Intent;\r\nimport android.content.SharedPreferences;\r\nimport android.os.Bundle;\r\nimport android.util.Patterns;\r\nimport android.view.View;\r\nimport android.widget.Button;\r\nimport android.widget.EditText;\r\nimport android.widget.ProgressBar;\r\nimport android.widget.Toast;\r\n\r\nimport com.google.firebase.database.DataSnapshot;\r\nimport com.google.firebase.database.DatabaseError;\r\nimport com.google.firebase.database.DatabaseReference;\r\nimport com.google.firebase.database.FirebaseDatabase;\r\nimport com.google.firebase.database.ValueEventListener;\r\n\r\nimport java.util.ArrayList;\r\n\r\nimport at.favre.lib.crypto.bcrypt.BCrypt;\r\n\r\npublic class LoginPage extends AppCompatActivity implements View.OnClickListener{\r\n    public static String globalName = \"\";\r\n    public static String globalEmail = \"\";\r\n    public static Boolean SignedIn = false;\r\n    public static ArrayList<BusStop> globalFavouriteBusStop = new ArrayList<>();\r\n\r\n    //private TextView register;\r\n    private EditText editTextEmail, editTextPassword;\r\n    private Button signIn, register;\r\n    private ProgressBar progressBar;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_login_page);\r\n        /*Remove this lol */\r\n        //startActivity(new Intent(LoginPage.this, MainActivity.class));\r\n        signIn = findViewById(R.id.loginbutton);\r\n        signIn.setOnClickListener(this);\r\n\r\n        register = findViewById(R.id.gotoregisterpage);\r\n        register.setOnClickListener(this);\r\n\r\n        editTextEmail = findViewById(R.id.emailAddress);\r\n        editTextPassword = findViewById(R.id.password);\r\n\r\n        progressBar = findViewById(R.id.progressBar);\r\n        /* here*/\r\n        SharedPreferences prefs =  getSharedPreferences(\"LoginData\", MODE_PRIVATE);\r\n        globalName = prefs.getString(\"name\", \"\");\r\n        globalEmail = prefs.getString(\"email\", \"\");\r\n        SignedIn = prefs.getString(\"login\", \"\").equals(\"True\");\r\n\r\n        if(SignedIn){\r\n\r\n            FirebaseDatabase db = FirebaseDatabase.getInstance(\"https://transportme-c607f-default-rtdb.asia-southeast1.firebasedatabase.app/\");\r\n            DatabaseReference myRef = db.getReference(\"User\");\r\n            myRef.addValueEventListener(new ValueEventListener() {\r\n                @Override\r\n                public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n                    if(SignedIn){\r\n                        globalFavouriteBusStop.clear();\r\n                        /*DatabaseReference favouriteref = myRef.child(globalName).child(\"Favourited\");*/\r\n                        for (DataSnapshot favBS : snapshot.child(globalName).child(\"Favourited\").getChildren()) {\r\n                            String busStopCode = favBS.getKey();\r\n                            for (int i = 0 ; i< globalBusStops.size(); i++){\r\n                                if (busStopCode.equals(globalBusStops.get(i).BusStopCode)){\r\n                                    globalFavouriteBusStop.add(globalBusStops.get(i));\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n\r\n                @Override\r\n                public void onCancelled(@NonNull DatabaseError error) {\r\n\r\n                }\r\n            });\r\n\r\n            startActivity(new Intent(LoginPage.this, MainActivity.class));\r\n        }\r\n\r\n    }\r\n\r\n    @Override\r\n    public void onClick(View v) {\r\n        switch (v.getId()){\r\n            case R.id.loginbutton:\r\n                String email = editTextEmail.getText().toString();\r\n                String password = editTextPassword.getText().toString();\r\n\r\n                if(email.isEmpty()){\r\n                    editTextEmail.setError(\"Email is required\");\r\n                    editTextEmail.requestFocus();\r\n                    return;\r\n                }\r\n                if(!Patterns.EMAIL_ADDRESS.matcher(email).matches()){\r\n                    editTextEmail.setError(\"Please enter a valid email\");\r\n                    editTextEmail.requestFocus();\r\n                    return;\r\n                }\r\n\r\n                if(password.isEmpty()){\r\n                    editTextPassword.setError(\"Password is empty\");\r\n                    editTextPassword.requestFocus();\r\n                    return;\r\n                }\r\n                if(password.length() < 6){\r\n                    editTextPassword.setError(\"Min password length is 6 characters\");\r\n                    editTextPassword.requestFocus();\r\n                    return;\r\n                }\r\n\r\n                editTextEmail.setEnabled(false);\r\n                editTextPassword.setEnabled(false);\r\n                progressBar.setVisibility(View.VISIBLE);\r\n                FirebaseDatabase db = FirebaseDatabase.getInstance(\"https://transportme-c607f-default-rtdb.asia-southeast1.firebasedatabase.app/\");\r\n                DatabaseReference myRef = db.getReference(\"User\");\r\n                myRef.addValueEventListener(new ValueEventListener() {\r\n                    @Override\r\n                    public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n                        for(DataSnapshot user : snapshot.getChildren()) {\r\n                            if (user.child(\"email\").getValue().toString().equals(email)) {\r\n                                if (BCrypt.verifyer().verify(password.toCharArray(), user.child(\"password\").getValue().toString()).verified){\r\n                                    if(!SignedIn)\r\n                                    {\r\n\r\n                                        Toast.makeText(LoginPage.this, \"Login Successful!\", Toast.LENGTH_LONG).show();\r\n                                        globalName = user.child(\"name\").getValue().toString();\r\n                                        globalEmail = user.child(\"email\").getValue().toString();\r\n                                        SignedIn = true;\r\n\r\n                                        /* here*/\r\n                                        SharedPreferences.Editor editor = getSharedPreferences(\"LoginData\", MODE_PRIVATE).edit();\r\n                                        editor.putString(\"name\", globalName);\r\n                                        editor.putString(\"email\", globalEmail);\r\n                                        editor.putString(\"login\",\"True\" );\r\n                                        editor.apply();\r\n\r\n                                        startActivity(new Intent(LoginPage.this, MainActivity.class));\r\n                                    }\r\n                                }\r\n                            }\r\n\r\n                        }\r\n\r\n                        if(SignedIn){\r\n                            globalFavouriteBusStop.clear();\r\n                            /*DatabaseReference favouriteref = myRef.child(globalName).child(\"Favourited\");*/\r\n                            for (DataSnapshot favBS : snapshot.child(globalName).child(\"Favourited\").getChildren()) {\r\n                                String busStopCode = favBS.getKey();\r\n                                for (int i = 0 ; i< globalBusStops.size(); i++){\r\n                                    if (busStopCode.equals(globalBusStops.get(i).BusStopCode)){\r\n                                        globalFavouriteBusStop.add(globalBusStops.get(i));\r\n                                    }\r\n                                }\r\n                            }\r\n                        }\r\n\r\n                        if (!SignedIn){\r\n                            Toast.makeText(LoginPage.this, \"Invalid Credentials, please try again\", Toast.LENGTH_LONG).show();\r\n                            editTextEmail.setEnabled(true);\r\n                            editTextPassword.setEnabled(true);\r\n                            progressBar.setVisibility(View.INVISIBLE);\r\n                        }\r\n                    }\r\n\r\n                    @Override\r\n                    public void onCancelled(@NonNull DatabaseError error) {\r\n\r\n                    }\r\n                });\r\n\r\n                break;\r\n            case R.id.gotoregisterpage:\r\n                startActivity(new Intent(this, RegistrationPage.class));\r\n                break;\r\n        }\r\n    }\r\n\r\n    //private void userLogin() {\r\n\r\n        /**mAuth.signInWithEmailAndPassword(email,password).addOnSuccessListener(new OnSuccessListener<AuthResult>() {\r\n            @Override\r\n            public void onSuccess(AuthResult authResult) {\r\n                startActivity(new Intent(LoginPage.this, MainActivity.class));\r\n                finish();\r\n            }\r\n        }).addOnFailureListener(new OnFailureListener() {\r\n            @Override\r\n            public void onFailure(@NonNull Exception e) {\r\n                //Toast.makeText(LoginPage.this, \"Error\"+ authResult.getException().getMessage(), Toast.LENGTH_LONG).show();\r\n                Toast.makeText(LoginPage.this, \"Invalid Credentials, please try again\", Toast.LENGTH_LONG).show();\r\n                editTextEmail.setEnabled(true);\r\n                editTextPassword.setEnabled(true);\r\n                progressBar.setVisibility(View.INVISIBLE);\r\n            }\r\n        });**/\r\n\r\n        /**mAuth.signInWithEmailAndPassword(email, password).addOnCompleteListener(new OnCompleteListener<AuthResult>() {\r\n            @Override\r\n            public void onComplete(@NonNull Task<AuthResult> task) {\r\n                if (task.isSuccessful()){\r\n                    //redirect to user profile (get main page from github)\r\n                    startActivity(new Intent(LoginPage.this, MainActivity.class));\r\n\r\n                }\r\n                else{\r\n                    Toast.makeText(LoginPage.this, \"Invalid Credentials, please try again\", Toast.LENGTH_LONG).show();\r\n                    editTextEmail.setEnabled(true);\r\n                    editTextPassword.setEnabled(true);\r\n                    progressBar.setVisibility(View.INVISIBLE);\r\n                }\r\n                progressBar.setVisibility(View.GONE);\r\n            }\r\n        });\r\n    }**/\r\n/**\r\n    @Override\r\n    protected void onStart() {\r\n        super.onStart();\r\n        if(FirebaseAuth.getInstance().getCurrentUser() != null) {\r\n            startActivity(new Intent(this, MainActivity.class));\r\n            finish();\r\n    }**/\r\n    //}\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/sg/edu/np/mad/transportme/LoginPage.java b/app/src/main/java/sg/edu/np/mad/transportme/LoginPage.java
--- a/app/src/main/java/sg/edu/np/mad/transportme/LoginPage.java	(revision be793fce20e64009a4ea8f7d07aad3e9941bc482)
+++ b/app/src/main/java/sg/edu/np/mad/transportme/LoginPage.java	(date 1656036267599)
@@ -8,6 +8,7 @@
 import android.content.Intent;
 import android.content.SharedPreferences;
 import android.os.Bundle;
+import android.util.Log;
 import android.util.Patterns;
 import android.view.View;
 import android.widget.Button;
@@ -30,7 +31,7 @@
     public static String globalEmail = "";
     public static Boolean SignedIn = false;
     public static ArrayList<BusStop> globalFavouriteBusStop = new ArrayList<>();
-
+    public static Double globalCloseness;
     //private TextView register;
     private EditText editTextEmail, editTextPassword;
     private Button signIn, register;
@@ -57,7 +58,8 @@
         globalName = prefs.getString("name", "");
         globalEmail = prefs.getString("email", "");
         SignedIn = prefs.getString("login", "").equals("True");
-
+        globalCloseness = Double.valueOf(prefs.getString("closeness","0.3"));
+        Log.i("Loaded closeness", String.valueOf(globalCloseness));
         if(SignedIn){
 
             FirebaseDatabase db = FirebaseDatabase.getInstance("https://transportme-c607f-default-rtdb.asia-southeast1.firebasedatabase.app/");
Index: app/src/main/java/sg/edu/np/mad/transportme/ProfileFragment.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package sg.edu.np.mad.transportme;\r\n\r\nimport static android.content.Context.MODE_PRIVATE;\r\nimport static sg.edu.np.mad.transportme.LoginPage.globalEmail;\r\nimport static sg.edu.np.mad.transportme.LoginPage.globalFavouriteBusStop;\r\nimport static sg.edu.np.mad.transportme.LoginPage.globalName;\r\nimport static sg.edu.np.mad.transportme.MainActivity.globalCloseness;\r\n\r\nimport android.content.Intent;\r\nimport android.content.SharedPreferences;\r\nimport android.os.Bundle;\r\n\r\nimport androidx.fragment.app.Fragment;\r\n\r\nimport android.util.Log;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.Button;\r\nimport android.widget.SeekBar;\r\nimport android.widget.TextView;\r\n\r\nimport com.google.android.material.textfield.TextInputEditText;\r\n\r\n/**\r\n * A simple {@link Fragment} subclass.\r\n * Use the {@link ProfileFragment#newInstance} factory method to\r\n * create an instance of this fragment.\r\n */\r\npublic class ProfileFragment extends Fragment {\r\n\r\n    // TODO: Rename parameter arguments, choose names that match\r\n    // the fragment initialization parameters, e.g. ARG_ITEM_NUMBER\r\n    private static final String ARG_PARAM1 = \"param1\";\r\n    private static final String ARG_PARAM2 = \"param2\";\r\n\r\n    // TODO: Rename and change types of parameters\r\n    private String mParam1;\r\n    private String mParam2;\r\n\r\n    public ProfileFragment() {\r\n        // Required empty public constructor\r\n    }\r\n\r\n    /**\r\n     * Use this factory method to create a new instance of\r\n     * this fragment using the provided parameters.\r\n     *\r\n     * @param param1 Parameter 1.\r\n     * @param param2 Parameter 2.\r\n     * @return A new instance of fragment ProfileFragment.\r\n     */\r\n    // TODO: Rename and change types and number of parameters\r\n    public static ProfileFragment newInstance(String param1, String param2) {\r\n        ProfileFragment fragment = new ProfileFragment();\r\n        Bundle args = new Bundle();\r\n        args.putString(ARG_PARAM1, param1);\r\n        args.putString(ARG_PARAM2, param2);\r\n        fragment.setArguments(args);\r\n        return fragment;\r\n    }\r\n\r\n    @Override\r\n    public void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        if (getArguments() != null) {\r\n            mParam1 = getArguments().getString(ARG_PARAM1);\r\n            mParam2 = getArguments().getString(ARG_PARAM2);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\r\n                             Bundle savedInstanceState) {\r\n        // Inflate the layout for this fragment\r\n\r\n        View rootView = inflater.inflate(R.layout.fragment_profile, container, false);\r\n        TextInputEditText username = rootView.findViewById(R.id.profileuserName);\r\n        TextInputEditText email = rootView.findViewById(R.id.profileuserEmail);\r\n\r\n        SeekBar closenessSeekBar = rootView.findViewById(R.id.seekBar);\r\n        TextView closenessTextView = rootView.findViewById(R.id.closeness);\r\n        closenessTextView.setText(\"Bus Stop Closeness (\"+ String.valueOf((int) (globalCloseness*1000)) +\" Meters)\");\r\n        closenessSeekBar.setProgress((int) (globalCloseness*10));\r\n        closenessSeekBar.setOnSeekBarChangeListener(new SeekBar.OnSeekBarChangeListener() {\r\n            @Override\r\n            public void onProgressChanged(SeekBar seekBar, int i, boolean b) {\r\n                closenessTextView.setText(\"Bus Stop Closeness (\"+ String.valueOf(i*100) +\" Meters)\");\r\n                Double doublei = Double.valueOf(i);\r\n                globalCloseness = doublei/10;\r\n                Log.d(\"global\", String.valueOf(globalCloseness));\r\n            }\r\n\r\n            @Override\r\n            public void onStartTrackingTouch(SeekBar seekBar) {\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onStopTrackingTouch(SeekBar seekBar) {\r\n\r\n            }\r\n        });\r\n\r\n        username.setText(globalName);\r\n        email.setText(globalEmail);\r\n        Intent intent = new Intent(getActivity(), LoginPage.class);\r\n        Button signoutButton = rootView.findViewById(R.id.signoutbutton);\r\n        signoutButton.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view)\r\n            {\r\n                SharedPreferences.Editor editor = getActivity().getSharedPreferences(\"LoginData\", MODE_PRIVATE).edit();\r\n                editor.putString(\"name\", \"\");\r\n                editor.putString(\"email\", \"\");\r\n                editor.putString(\"login\",\"False\" );\r\n                editor.apply();\r\n                globalName = \"\";\r\n                globalEmail = \"\";\r\n\r\n                LoginPage.SignedIn = false;\r\n                globalFavouriteBusStop.clear();\r\n                startActivity(intent);\r\n            }\r\n        });\r\n        return rootView;\r\n\r\n    }\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/sg/edu/np/mad/transportme/ProfileFragment.java b/app/src/main/java/sg/edu/np/mad/transportme/ProfileFragment.java
--- a/app/src/main/java/sg/edu/np/mad/transportme/ProfileFragment.java	(revision be793fce20e64009a4ea8f7d07aad3e9941bc482)
+++ b/app/src/main/java/sg/edu/np/mad/transportme/ProfileFragment.java	(date 1656038812550)
@@ -4,8 +4,9 @@
 import static sg.edu.np.mad.transportme.LoginPage.globalEmail;
 import static sg.edu.np.mad.transportme.LoginPage.globalFavouriteBusStop;
 import static sg.edu.np.mad.transportme.LoginPage.globalName;
-import static sg.edu.np.mad.transportme.MainActivity.globalCloseness;
+import static sg.edu.np.mad.transportme.LoginPage.globalCloseness;
 
+import android.content.Context;
 import android.content.Intent;
 import android.content.SharedPreferences;
 import android.os.Bundle;
@@ -21,7 +22,7 @@
 import android.widget.TextView;
 
 import com.google.android.material.textfield.TextInputEditText;
-
+import android.content.SharedPreferences;
 /**
  * A simple {@link Fragment} subclass.
  * Use the {@link ProfileFragment#newInstance} factory method to
@@ -78,17 +79,22 @@
         TextInputEditText username = rootView.findViewById(R.id.profileuserName);
         TextInputEditText email = rootView.findViewById(R.id.profileuserEmail);
 
+
         SeekBar closenessSeekBar = rootView.findViewById(R.id.seekBar);
         TextView closenessTextView = rootView.findViewById(R.id.closeness);
-        closenessTextView.setText("Bus Stop Closeness ("+ String.valueOf((int) (globalCloseness*1000)) +" Meters)");
+        closenessTextView.setText("Bus Stop Radius ("+ String.valueOf((int) (globalCloseness*1000)) +" Meters)");
         closenessSeekBar.setProgress((int) (globalCloseness*10));
         closenessSeekBar.setOnSeekBarChangeListener(new SeekBar.OnSeekBarChangeListener() {
             @Override
             public void onProgressChanged(SeekBar seekBar, int i, boolean b) {
-                closenessTextView.setText("Bus Stop Closeness ("+ String.valueOf(i*100) +" Meters)");
+                closenessTextView.setText("Bus Stop Radius ("+ String.valueOf(i*100) +" Meters)");
                 Double doublei = Double.valueOf(i);
                 globalCloseness = doublei/10;
-                Log.d("global", String.valueOf(globalCloseness));
+                SharedPreferences.Editor editor = getActivity().getSharedPreferences("LoginData", MODE_PRIVATE).edit();
+                editor.putString("closeness", String.valueOf(globalCloseness));
+                editor.commit();
+                Log.d("Loaded Saved Closenss", String.valueOf(globalCloseness));
+
             }
 
             @Override
Index: .idea/shelf/Uncommitted_changes_before_Update_at_16_6_2022_11_35_PM_[Default_Changelist]/shelved.patch
===================================================================
diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_16_6_2022_11_35_PM_[Default_Changelist]/shelved.patch b/.idea/shelf/Uncommitted_changes_before_Update_at_16_6_2022_11_35_PM_[Default_Changelist]/shelved.patch
deleted file mode 100644
--- a/.idea/shelf/Uncommitted_changes_before_Update_at_16_6_2022_11_35_PM_[Default_Changelist]/shelved.patch	(revision be793fce20e64009a4ea8f7d07aad3e9941bc482)
+++ /dev/null	(revision be793fce20e64009a4ea8f7d07aad3e9941bc482)
@@ -1,245 +0,0 @@
-Index: app/src/main/res/layout/bus_stop_layout.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<androidx.constraintlayout.widget.ConstraintLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"wrap_content\">\r\n\r\n    <androidx.cardview.widget.CardView\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"match_parent\"\r\n        android:layout_margin=\"0.80dp\"\r\n        app:layout_constraintBottom_toBottomOf=\"parent\"\r\n        app:layout_constraintEnd_toEndOf=\"parent\"\r\n        app:layout_constraintHorizontal_bias=\"0.473\"\r\n        app:layout_constraintStart_toStartOf=\"parent\"\r\n        app:layout_constraintTop_toTopOf=\"parent\"\r\n        app:layout_constraintVertical_bias=\"0.0\">\r\n\r\n        <androidx.constraintlayout.widget.ConstraintLayout\r\n            android:id=\"@+id/base_cardview\"\r\n            style=\"@style/Base.CardView\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"match_parent\"\r\n            android:layout_margin=\"10dp\"\r\n            app:layout_constraintBottom_toBottomOf=\"parent\"\r\n            app:layout_constraintEnd_toEndOf=\"parent\"\r\n            app:layout_constraintHorizontal_bias=\"0.473\"\r\n            app:layout_constraintStart_toStartOf=\"parent\"\r\n            app:layout_constraintTop_toTopOf=\"parent\"\r\n            app:layout_constraintVertical_bias=\"0.021\">\r\n\r\n            <LinearLayout\r\n                android:id=\"@+id/linearLayout\"\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"match_parent\"\r\n                android:orientation=\"vertical\"\r\n                app:layout_constraintBottom_toBottomOf=\"parent\"\r\n                app:layout_constraintEnd_toEndOf=\"parent\"\r\n                app:layout_constraintStart_toStartOf=\"parent\"\r\n                app:layout_constraintTop_toTopOf=\"parent\">\r\n\r\n                <androidx.constraintlayout.widget.ConstraintLayout\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"match_parent\">\r\n\r\n                    <ImageView\r\n                        android:id=\"@+id/BusAppIcon\"\r\n                        android:layout_width=\"50dp\"\r\n                        android:layout_height=\"0dp\"\r\n                        android:src=\"@drawable/appsplashicon\"\r\n                        app:layout_constraintBottom_toTopOf=\"@+id/recyclerView2\"\r\n                        app:layout_constraintLeft_toLeftOf=\"parent\"\r\n                        app:layout_constraintTop_toTopOf=\"parent\"></ImageView>\r\n\r\n                    <TextView\r\n                        android:id=\"@+id/BusStopCode\"\r\n                        android:layout_width=\"wrap_content\"\r\n                        android:layout_height=\"wrap_content\"\r\n                        android:layout_marginStart=\"8dp\"\r\n                        android:text=\"BusStopCode\"\r\n                        android:textColor=\"#000000\"\r\n                        android:textSize=\"16sp\"\r\n                        app:layout_constraintStart_toEndOf=\"@+id/BusAppIcon\"\r\n                        app:layout_constraintTop_toBottomOf=\"@+id/Description\" />\r\n\r\n                    <TextView\r\n                        android:id=\"@+id/Description\"\r\n                        android:layout_width=\"wrap_content\"\r\n                        android:layout_height=\"wrap_content\"\r\n                        android:layout_marginStart=\"8dp\"\r\n                        android:text=\"Description\"\r\n                        android:textColor=\"#000000\"\r\n                        android:textSize=\"24sp\"\r\n                        app:layout_constraintStart_toEndOf=\"@+id/BusAppIcon\"\r\n                        app:layout_constraintTop_toTopOf=\"parent\" />\r\n\r\n                    <ImageView\r\n                        android:id=\"@+id/DropDownArrow\"\r\n                        android:layout_width=\"20dp\"\r\n                        android:layout_height=\"30dp\"\r\n                        android:src=\"@drawable/arrow_down_sign_to_navigate\"\r\n                        app:layout_constraintBottom_toTopOf=\"@+id/recyclerView2\"\r\n                        app:layout_constraintRight_toRightOf=\"parent\"\r\n                        app:layout_constraintTop_toTopOf=\"parent\"></ImageView>\r\n\r\n                    <TextView\r\n                        android:id=\"@+id/RoadName\"\r\n                        android:layout_width=\"wrap_content\"\r\n                        android:layout_height=\"wrap_content\"\r\n                        android:layout_marginStart=\"16dp\"\r\n                        android:text=\"RoadName\"\r\n                        android:textColor=\"#474646\"\r\n                        app:layout_constraintBottom_toBottomOf=\"@+id/BusStopCode\"\r\n                        app:layout_constraintStart_toEndOf=\"@+id/BusStopCode\"\r\n                        app:layout_constraintTop_toTopOf=\"@+id/BusStopCode\" />\r\n\r\n                    <androidx.recyclerview.widget.RecyclerView\r\n                        android:id=\"@+id/recyclerView2\"\r\n                        android:layout_width=\"match_parent\"\r\n                        android:layout_height=\"wrap_content\"\r\n                        android:visibility=\"gone\"\r\n                        app:layout_constraintStart_toStartOf=\"parent\"\r\n                        app:layout_constraintTop_toBottomOf=\"@+id/BusStopCode\">\r\n\r\n                    </androidx.recyclerview.widget.RecyclerView>\r\n\r\n                </androidx.constraintlayout.widget.ConstraintLayout>\r\n\r\n            </LinearLayout>\r\n\r\n\r\n        </androidx.constraintlayout.widget.ConstraintLayout>\r\n\r\n    </androidx.cardview.widget.CardView>\r\n\r\n</androidx.constraintlayout.widget.ConstraintLayout>
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/res/layout/bus_stop_layout.xml b/app/src/main/res/layout/bus_stop_layout.xml
---- a/app/src/main/res/layout/bus_stop_layout.xml	(revision 8875bc548f79acbde8b6473784634025c1714ec1)
-+++ b/app/src/main/res/layout/bus_stop_layout.xml	(date 1655391715417)
-@@ -78,6 +78,7 @@
-                         android:id="@+id/DropDownArrow"
-                         android:layout_width="20dp"
-                         android:layout_height="30dp"
-+                        android:rotation="90"
-                         android:src="@drawable/arrow_down_sign_to_navigate"
-                         app:layout_constraintBottom_toTopOf="@+id/recyclerView2"
-                         app:layout_constraintRight_toRightOf="parent"
-Index: app/src/main/res/layout/activity_loading_screen.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<androidx.constraintlayout.widget.ConstraintLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\"\r\n    tools:context=\".LoadingScreen\"\r\n    android:background=\"#E9b872\">\r\n    <ImageView\r\n        android:id=\"@+id/AppSplashIcon\"\r\n        android:layout_width=\"150dp\"\r\n        android:layout_height=\"150dp\"\r\n        android:src=\"@drawable/appsplashicon\"\r\n        app:layout_constraintBottom_toBottomOf=\"parent\"\r\n        app:layout_constraintLeft_toLeftOf=\"parent\"\r\n        app:layout_constraintRight_toRightOf=\"parent\"\r\n        app:layout_constraintTop_toTopOf=\"parent\"></ImageView>\r\n\r\n    <TextView\r\n        android:layout_width=\"wrap_content\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:fontFamily=\"@font/inter_bold\"\r\n        android:text=\"TransportMe\"\r\n        android:textColor=\"@color/white\"\r\n        android:textSize=\"40dp\"\r\n        app:layout_constraintLeft_toLeftOf=\"parent\"\r\n        app:layout_constraintRight_toRightOf=\"parent\"\r\n        app:layout_constraintTop_toBottomOf=\"@+id/AppSplashIcon\">\r\n\r\n    </TextView>\r\n\r\n</androidx.constraintlayout.widget.ConstraintLayout>
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/res/layout/activity_loading_screen.xml b/app/src/main/res/layout/activity_loading_screen.xml
---- a/app/src/main/res/layout/activity_loading_screen.xml	(revision 8875bc548f79acbde8b6473784634025c1714ec1)
-+++ b/app/src/main/res/layout/activity_loading_screen.xml	(date 1655393047854)
-@@ -17,6 +17,7 @@
-         app:layout_constraintTop_toTopOf="parent"></ImageView>
- 
-     <TextView
-+        android:id="@+id/textView"
-         android:layout_width="wrap_content"
-         android:layout_height="wrap_content"
-         android:fontFamily="@font/inter_bold"
-@@ -29,4 +30,23 @@
- 
-     </TextView>
- 
-+    <ProgressBar
-+        android:id="@+id/progress_bar"
-+        style="?android:attr/progressBarStyleHorizontal"
-+        android:layout_width="174dp"
-+        android:layout_height="27dp"
-+        android:layout_marginTop="32dp"
-+        app:layout_constraintEnd_toEndOf="parent"
-+        app:layout_constraintHorizontal_bias="0.497"
-+        app:layout_constraintStart_toStartOf="parent"
-+        app:layout_constraintTop_toBottomOf="@+id/textView" />
-+
-+    <TextView
-+        android:id="@+id/progress_text"
-+        android:layout_width="wrap_content"
-+        android:layout_height="wrap_content"
-+        android:text="TextView"
-+        tools:layout_editor_absoluteX="176dp"
-+        tools:layout_editor_absoluteY="560dp" />
-+
- </androidx.constraintlayout.widget.ConstraintLayout>
-\ No newline at end of file
-Index: app/src/main/java/sg/edu/np/mad/transportme/LoadingScreen.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package sg.edu.np.mad.transportme;\r\n\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.recyclerview.widget.LinearLayoutManager;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\n\r\nimport android.content.Intent;\r\nimport android.os.Bundle;\r\nimport android.util.Log;\r\nimport android.widget.Toast;\r\n\r\nimport java.util.ArrayList;\r\n\r\npublic class LoadingScreen extends AppCompatActivity {\r\n    public static ArrayList<BusStop> globalBusStops = new ArrayList<>();\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_loading_screen);\r\n\r\n        /* Load Bus Stops API, can add persistent storage i guess?\r\n         */\r\n        ApiBusStopService apiBusStopService = new ApiBusStopService(LoadingScreen.this);\r\n        apiBusStopService.getBusStop(new ApiBusStopService.VolleyResponseListener() {\r\n            @Override\r\n            public void onError(String message) {\r\n                Toast.makeText(LoadingScreen.this,\"Cannot Get Bus Stops\",Toast.LENGTH_LONG).show();\r\n            }\r\n            @Override\r\n            public void onResponse(ArrayList<BusStop> busStops) {\r\n                globalBusStops = busStops;\r\n                Intent goToLoginPage = new Intent(LoadingScreen.this, LoginPage.class);\r\n                startActivity(goToLoginPage);\r\n            }\r\n        });\r\n    }\r\n}
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/java/sg/edu/np/mad/transportme/LoadingScreen.java b/app/src/main/java/sg/edu/np/mad/transportme/LoadingScreen.java
---- a/app/src/main/java/sg/edu/np/mad/transportme/LoadingScreen.java	(revision 8875bc548f79acbde8b6473784634025c1714ec1)
-+++ b/app/src/main/java/sg/edu/np/mad/transportme/LoadingScreen.java	(date 1655393156768)
-@@ -6,18 +6,24 @@
- 
- import android.content.Intent;
- import android.os.Bundle;
-+import android.os.Handler;
- import android.util.Log;
-+import android.widget.ProgressBar;
-+import android.widget.TextView;
- import android.widget.Toast;
- 
- import java.util.ArrayList;
- 
- public class LoadingScreen extends AppCompatActivity {
-     public static ArrayList<BusStop> globalBusStops = new ArrayList<>();
-+    int i = 0;
-     @Override
-     protected void onCreate(Bundle savedInstanceState) {
-         super.onCreate(savedInstanceState);
-         setContentView(R.layout.activity_loading_screen);
- 
-+        ProgressBar progressBar = findViewById(R.id.progress_bar);
-+        TextView progressText = findViewById(R.id.progress_text);
-         /* Load Bus Stops API, can add persistent storage i guess?
-          */
-         ApiBusStopService apiBusStopService = new ApiBusStopService(LoadingScreen.this);
-@@ -28,10 +34,27 @@
-             }
-             @Override
-             public void onResponse(ArrayList<BusStop> busStops) {
-+                progressBar.setProgress(100);
-                 globalBusStops = busStops;
-                 Intent goToLoginPage = new Intent(LoadingScreen.this, LoginPage.class);
-                 startActivity(goToLoginPage);
-             }
-         });
-+        progressText.setText("Getting Bus Stops");
-+        final Handler handler = new Handler();
-+        handler.postDelayed(new Runnable() {
-+            @Override
-+            public void run() {
-+                // set the limitations for the numeric
-+                // text under the progress bar
-+                if (i <= 85) {
-+                    progressBar.setProgress(i);
-+                    i+=5;
-+                    handler.postDelayed(this, 200);
-+                } else {
-+                    handler.removeCallbacks(this);
-+                }
-+            }
-+        }, 200);
-     }
- }
-\ No newline at end of file
-Index: app/src/main/java/sg/edu/np/mad/transportme/BusStopAdapter.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package sg.edu.np.mad.transportme;\r\n\r\nimport android.content.Context;\r\nimport android.transition.AutoTransition;\r\nimport android.transition.TransitionManager;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.recyclerview.widget.LinearLayoutManager;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\n\r\nimport java.util.ArrayList;\r\n\r\npublic class BusStopAdapter\r\n        extends RecyclerView.Adapter<BusStopViewHolder>        //just like list, need declare <data type>\r\n{\r\n    ArrayList<BusStop> data;\r\n    Context c;\r\n    public BusStopAdapter(ArrayList<BusStop> data, Context c)\r\n    {\r\n        this.c = c;\r\n        this.data = data;                                       //this = this class / object\r\n    }\r\n    /* Remove This????? */\r\n    @Override\r\n    public int getItemViewType(int position){\r\n        return (position%5==0)?0:1;\r\n    }\r\n\r\n    @NonNull\r\n    @Override\r\n    public BusStopViewHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {\r\n        View item = LayoutInflater.from(parent.getContext()).inflate(R.layout.bus_stop_layout, parent,false);\r\n\r\n        return new BusStopViewHolder(item);\r\n    }\r\n\r\n    @Override\r\n    public void onBindViewHolder(@NonNull BusStopViewHolder holder, int position) {\r\n        BusStop content = data.get(position);\r\n        ViewGroup cardView = holder.itemView.findViewById(R.id.base_cardview);\r\n        View hiddenView = holder.itemView.findViewById(R.id.recyclerView2);\r\n\r\n        holder.itemView.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                if (holder.itemView.findViewById(R.id.recyclerView2).getVisibility() == View.VISIBLE){\r\n                    TransitionManager.beginDelayedTransition(cardView,new AutoTransition());\r\n                    holder.itemView.findViewById(R.id.recyclerView2).setVisibility(View.GONE);\r\n                }\r\n                else{\r\n                    TransitionManager.beginDelayedTransition(cardView,new AutoTransition());\r\n                    hiddenView.setVisibility(View.VISIBLE);\r\n                }\r\n            }\r\n        });\r\n\r\n        holder.Description.setText(content.Description);\r\n        holder.BusStopCode.setText(content.BusStopCode);\r\n        holder.RoadName.setText(content.RoadName);\r\n\r\n        /*RecyclerView rv = c.findViewById(R.id.recyclerView2);*/\r\n        BusServiceAdapter adapterMember = new BusServiceAdapter(content.busServices);\r\n        LinearLayoutManager layout = new LinearLayoutManager(c);\r\n        /*rv.setAdapter(adapter);\r\n        rv.setLayoutManager(layout);*/\r\n        holder.RecyclerView2.setLayoutManager(layout);\r\n        holder.RecyclerView2.setAdapter(adapterMember);\r\n    }\r\n\r\n    @Override\r\n    public int getItemCount() {\r\n        return data.size();\r\n    }\r\n}
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/java/sg/edu/np/mad/transportme/BusStopAdapter.java b/app/src/main/java/sg/edu/np/mad/transportme/BusStopAdapter.java
---- a/app/src/main/java/sg/edu/np/mad/transportme/BusStopAdapter.java	(revision 8875bc548f79acbde8b6473784634025c1714ec1)
-+++ b/app/src/main/java/sg/edu/np/mad/transportme/BusStopAdapter.java	(date 1655391971868)
-@@ -6,6 +6,9 @@
- import android.view.LayoutInflater;
- import android.view.View;
- import android.view.ViewGroup;
-+import android.view.animation.Animation;
-+import android.view.animation.LinearInterpolator;
-+import android.view.animation.RotateAnimation;
- 
- import androidx.annotation.NonNull;
- import androidx.recyclerview.widget.LinearLayoutManager;
-@@ -47,10 +50,21 @@
-             @Override
-             public void onClick(View view) {
-                 if (holder.itemView.findViewById(R.id.recyclerView2).getVisibility() == View.VISIBLE){
-+
-+                    RotateAnimation rotate = new RotateAnimation(-90, 0, Animation.RELATIVE_TO_SELF, 0.5f,          Animation.RELATIVE_TO_SELF, 0.5f);
-+                    rotate.setDuration(250);
-+                    rotate.setInterpolator(new LinearInterpolator());
-+                    holder.itemView.findViewById(R.id.DropDownArrow).startAnimation(rotate);
-+                    holder.itemView.findViewById(R.id.DropDownArrow).setRotation(90);
-                     TransitionManager.beginDelayedTransition(cardView,new AutoTransition());
-                     holder.itemView.findViewById(R.id.recyclerView2).setVisibility(View.GONE);
-                 }
-                 else{
-+                    RotateAnimation rotate = new RotateAnimation(90, 0, Animation.RELATIVE_TO_SELF, 0.5f,          Animation.RELATIVE_TO_SELF, 0.5f);
-+                    rotate.setDuration(250);
-+                    rotate.setInterpolator(new LinearInterpolator());
-+                    holder.itemView.findViewById(R.id.DropDownArrow).startAnimation(rotate);
-+                    holder.itemView.findViewById(R.id.DropDownArrow).setRotation(0);
-                     TransitionManager.beginDelayedTransition(cardView,new AutoTransition());
-                     hiddenView.setVisibility(View.VISIBLE);
-                 }
-Index: app/src/main/java/sg/edu/np/mad/transportme/MainActivity.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package sg.edu.np.mad.transportme;\r\n\r\nimport static android.Manifest.permission.ACCESS_COARSE_LOCATION;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.annotation.RequiresApi;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.core.app.ActivityCompat;\r\nimport androidx.core.app.ActivityManagerCompat;\r\nimport androidx.fragment.app.Fragment;\r\nimport androidx.fragment.app.FragmentActivity;\r\nimport androidx.fragment.app.FragmentManager;\r\nimport androidx.fragment.app.FragmentTransaction;\r\nimport androidx.recyclerview.widget.LinearLayoutManager;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\n\r\nimport android.Manifest;\r\nimport android.annotation.SuppressLint;\r\nimport android.content.pm.PackageManager;\r\nimport android.location.Address;\r\nimport android.location.Geocoder;\r\nimport android.location.Location;\r\nimport android.location.LocationListener;\r\nimport android.location.LocationManager;\r\nimport android.os.Build;\r\nimport android.os.Bundle;\r\nimport android.util.Log;\r\nimport android.view.View;\r\nimport android.widget.FrameLayout;\r\nimport android.widget.LinearLayout;\r\nimport android.widget.Toast;\r\n\r\nimport com.google.android.gms.common.api.GoogleApiClient;\r\nimport com.google.android.gms.maps.CameraUpdateFactory;\r\nimport com.google.android.gms.maps.GoogleMap;\r\nimport com.google.android.gms.maps.OnMapReadyCallback;\r\nimport com.google.android.gms.maps.SupportMapFragment;\r\nimport com.google.android.gms.maps.model.LatLng;\r\nimport com.google.android.gms.maps.model.MarkerOptions;\r\nimport com.google.android.material.bottomnavigation.BottomNavigationView;\r\n\r\nimport java.io.IOException;\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\n\r\npublic class MainActivity extends FragmentActivity implements OnMapReadyCallback  {\r\n\r\n    GoogleMap map;\r\n    LocationManager locationManager;\r\n\r\n    private static final String[] LOCATION_PERMS={\r\n            Manifest.permission.ACCESS_COARSE_LOCATION,\r\n            Manifest.permission.ACCESS_FINE_LOCATION\r\n    };\r\n\r\n    private static final int LOCATION_REQUEST=1337;\r\n\r\n    @RequiresApi(api = Build.VERSION_CODES.M)\r\n    @SuppressLint(\"MissingPermission\")\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n\r\n        BottomNavigationView bottomNavigationView = findViewById(R.id.bottomNavigationView);\r\n        bottomNavigationView.setOnItemSelectedListener(item ->{\r\n            LinearLayout mapandrv = findViewById(R.id.MapAndRV);\r\n            FrameLayout fragmentlayout = findViewById(R.id.frame_layout);\r\n            switch(item.getItemId()){\r\n                case R.id.home:\r\n                    fragmentlayout.setVisibility(View.INVISIBLE);\r\n                    mapandrv.setVisibility(View.VISIBLE);\r\n                    break;\r\n                case R.id.favourites:\r\n                    mapandrv.setVisibility(View.INVISIBLE);\r\n                    fragmentlayout.setVisibility(View.VISIBLE);\r\n                    replaceFragment(new FavouritesFragment());\r\n                    break;\r\n                case R.id.search:\r\n                    mapandrv.setVisibility(View.INVISIBLE);\r\n                    fragmentlayout.setVisibility(View.VISIBLE);\r\n                    replaceFragment(new SearchFragment());\r\n                    break;\r\n                case R.id.profile:\r\n                    mapandrv.setVisibility(View.INVISIBLE);\r\n                    fragmentlayout.setVisibility(View.VISIBLE);\r\n                    replaceFragment(new ProfileFragment());\r\n                    break;\r\n            }\r\n            return true;\r\n        });\r\n\r\n        requestPermissions(LOCATION_PERMS, LOCATION_REQUEST);\r\n\r\n        SupportMapFragment mapFragment = (SupportMapFragment) getSupportFragmentManager().findFragmentById(R.id.map);\r\n        mapFragment.getMapAsync(this);\r\n        locationManager = (LocationManager) getSystemService(LOCATION_SERVICE);\r\n\r\n        ArrayList<BusStop> busStops = LoadingScreen.globalBusStops;\r\n\r\n        if (ActivityCompat.checkSelfPermission(this, Manifest.permission.ACCESS_FINE_LOCATION) != PackageManager.PERMISSION_GRANTED && ActivityCompat.checkSelfPermission(this, ACCESS_COARSE_LOCATION) != PackageManager.PERMISSION_GRANTED) {\r\n            // TODO: Consider calling\r\n            //    ActivityCompat#requestPermissions\r\n            // here to request the missing permissions, and then overriding\r\n            //   public void onRequestPermissionsResult(int requestCode, String[] permissions,\r\n            //                                          int[] grantResults)\r\n            // to handle the case where the user grants the permission. See the documentation\r\n            // for ActivityCompat#requestPermissions for more details.\r\n            return;\r\n        }\r\n        if (locationManager.isProviderEnabled(LocationManager.GPS_PROVIDER)) {\r\n            locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 60000, 10, new LocationListener() {\r\n                @Override\r\n                public void onLocationChanged(@NonNull Location location) {\r\n                    Double Latitude = location.getLatitude();\r\n                    Double Longitude = location.getLongitude();\r\n                    LatLng latLng = new LatLng(Latitude, Longitude);\r\n                    Geocoder geocoder = new Geocoder(getApplicationContext());\r\n\r\n                    /* For testing purposes, Remove at the end */\r\n                    /*Latitude = 1.332346;\r\n                    Longitude = 103.777561;*/\r\n\r\n                    Double Closeness = 0.00504;\r\n                    ArrayList<BusStop> closeBusStops = new ArrayList<>();\r\n                    for (int i = 0; i < busStops.size(); i++){\r\n                        BusStop busStop = busStops.get(i);\r\n                        if (busStop.Longitude < Longitude+Closeness && busStop.Longitude > Longitude-Closeness\r\n                                && busStop.Latitude < Latitude+Closeness && busStop.Latitude > Latitude-Closeness){\r\n                            closeBusStops.add(busStop);\r\n                            LatLng latlongmarker = new LatLng(busStop.Latitude, busStop.Longitude);\r\n                            map.addMarker(new MarkerOptions().position(latlongmarker).title(busStop.Description));\r\n                        }\r\n                    }\r\n                    ApiBusStopService apiBusStopService = new ApiBusStopService(MainActivity.this);\r\n                    apiBusStopService.getBusService(closeBusStops,new ApiBusStopService.VolleyResponseListener2() {\r\n                        @Override\r\n                        public void onError(String message) {\r\n                            Toast.makeText(MainActivity.this,\"Cannot Get Bus Stops\",Toast.LENGTH_LONG).show();\r\n                        }\r\n                        @Override\r\n                        public void onResponse(ArrayList<BusStop> busStopsLoaded) {\r\n                            RecyclerView rv = findViewById(R.id.recyclerView);\r\n                            BusStopAdapter adapter = new BusStopAdapter(busStopsLoaded,MainActivity.this);\r\n                            LinearLayoutManager layout = new LinearLayoutManager(MainActivity.this);\r\n                            rv.setAdapter(adapter);\r\n                            rv.setLayoutManager(layout);\r\n                        }\r\n                    });\r\n                    try {\r\n                        List<Address> addressList = geocoder.getFromLocation(Latitude, Longitude, 1);\r\n                        String str = addressList.get(0).getLocality()+\", \";\r\n                        str += addressList.get(0).getCountryName();\r\n\r\n                        map.moveCamera(CameraUpdateFactory.newLatLngZoom(latLng, 16.2f));\r\n                    } catch (IOException e){\r\n                        e.printStackTrace();\r\n                    }\r\n                }\r\n            });\r\n        }\r\n        else if(locationManager.isProviderEnabled(LocationManager.NETWORK_PROVIDER)){\r\n            locationManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 60000, 10, new LocationListener() {\r\n                @Override\r\n                public void onLocationChanged(@NonNull Location location) {\r\n                    Double Latitude = location.getLatitude();\r\n                    Double Longitude = location.getLongitude();\r\n\r\n                    /* For testing purposes, Remove at the end */\r\n                    /*Latitude = 1.332346;\r\n                    Longitude = 103.777561;*/\r\n\r\n                    LatLng latLng = new LatLng(Latitude, Longitude);\r\n                    Geocoder geocoder = new Geocoder(getApplicationContext());\r\n\r\n                    /* +-0.00904 lat and long per km */\r\n                    Double Closeness = 0.00504;\r\n\r\n                    ArrayList<BusStop> closeBusStops = new ArrayList<>();\r\n                    for (int i = 0; i < busStops.size(); i++){\r\n                        BusStop busStop = busStops.get(i);\r\n                        if (busStop.Longitude < Longitude+Closeness && busStop.Longitude > Longitude-Closeness\r\n                                && busStop.Latitude < Latitude+Closeness && busStop.Latitude > Latitude-Closeness){\r\n                            closeBusStops.add(busStop);\r\n                            LatLng latlongmarker = new LatLng(busStop.Latitude, busStop.Longitude);\r\n                            map.addMarker(new MarkerOptions().position(latlongmarker).title(busStop.Description));\r\n                        }\r\n                    }\r\n\r\n                    ApiBusStopService apiBusStopService = new ApiBusStopService(MainActivity.this);\r\n                    apiBusStopService.getBusService(closeBusStops,new ApiBusStopService.VolleyResponseListener2() {\r\n                        @Override\r\n                        public void onError(String message) {\r\n                            Toast.makeText(MainActivity.this,\"Cannot Get Bus Stops\",Toast.LENGTH_LONG).show();\r\n                        }\r\n                        @Override\r\n                        public void onResponse(ArrayList<BusStop> busStopsLoaded) {\r\n\r\n                            RecyclerView rv = findViewById(R.id.recyclerView);\r\n                            BusStopAdapter adapter = new BusStopAdapter(busStopsLoaded,MainActivity.this);\r\n                            LinearLayoutManager layout = new LinearLayoutManager(MainActivity.this);\r\n                            rv.setAdapter(adapter);\r\n                            rv.setLayoutManager(layout);\r\n\r\n                        }\r\n                    });\r\n\r\n                    try {\r\n                        List<Address> addressList = geocoder.getFromLocation(Latitude, Longitude, 1);\r\n                        String str = addressList.get(0).getLocality()+\", \";\r\n                        str += addressList.get(0).getCountryName();\r\n                        map.moveCamera(CameraUpdateFactory.newLatLngZoom(latLng, 16.2f));\r\n                    } catch (IOException e){\r\n                        e.printStackTrace();\r\n                    }\r\n                }\r\n            });\r\n        }\r\n\r\n\r\n\r\n\r\n\r\n    }\r\n    private void replaceFragment(Fragment fragment){\r\n        FragmentManager fragmentManager = getSupportFragmentManager();\r\n        FragmentTransaction fragmentTransaction = fragmentManager.beginTransaction();\r\n        fragmentTransaction.replace(R.id.frame_layout,fragment);\r\n        fragmentTransaction.commit();\r\n    }\r\n\r\n    @SuppressLint(\"MissingPermission\")\r\n    @Override\r\n    public void onMapReady(@NonNull GoogleMap googleMap) {\r\n        map = googleMap;\r\n        map.setMyLocationEnabled(true);\r\n    }\r\n}
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/java/sg/edu/np/mad/transportme/MainActivity.java b/app/src/main/java/sg/edu/np/mad/transportme/MainActivity.java
---- a/app/src/main/java/sg/edu/np/mad/transportme/MainActivity.java	(revision 8875bc548f79acbde8b6473784634025c1714ec1)
-+++ b/app/src/main/java/sg/edu/np/mad/transportme/MainActivity.java	(date 1655388836076)
-@@ -122,7 +122,7 @@
-                     /*Latitude = 1.332346;
-                     Longitude = 103.777561;*/
- 
--                    Double Closeness = 0.00504;
-+                    Double Closeness = 0.00304;
-                     ArrayList<BusStop> closeBusStops = new ArrayList<>();
-                     for (int i = 0; i < busStops.size(); i++){
-                         BusStop busStop = busStops.get(i);
-Index: .idea/misc.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project version=\"4\">\r\n  <component name=\"DesignSurface\">\r\n    <option name=\"filePathToZoomLevelMap\">\r\n      <map>\r\n        <entry key=\"..\\:/#Poly/MAD/MAD-Assignment-TransportMe/app/src/main/res/layout/activity_loading_screen.xml\" value=\"0.14722222222222223\" />\r\n        <entry key=\"..\\:/#Poly/MAD/MAD-Assignment-TransportMe/app/src/main/res/layout/activity_login_page.xml\" value=\"0.358695652173913\" />\r\n        <entry key=\"..\\:/#Poly/MAD/MAD-Assignment-TransportMe/app/src/main/res/layout/activity_registration_page.xml\" value=\"0.358695652173913\" />\r\n        <entry key=\"..\\:/#Poly/MAD/MAD-Assignment-TransportMe/app/src/main/res/layout/bus_service_layout.xml\" value=\"0.18802083333333333\" />\r\n        <entry key=\"..\\:/#Poly/MAD/MAD-Assignment-TransportMe/app/src/main/res/layout/bus_stop_layout.xml\" value=\"0.18802083333333333\" />\r\n        <entry key=\"..\\:/SEM 3 SCHOOL/MAD/MAD-Assignment-TransportMe/app/src/main/res/drawable/edittext_bg.xml\" value=\"0.2985\" />\r\n        <entry key=\"..\\:/SEM 3 SCHOOL/MAD/MAD-Assignment-TransportMe/app/src/main/res/layout/activity_loading_screen.xml\" value=\"0.25\" />\r\n        <entry key=\"..\\:/SEM 3 SCHOOL/MAD/MAD-Assignment-TransportMe/app/src/main/res/layout/activity_login_page.xml\" value=\"0.2\" />\r\n        <entry key=\"..\\:/SEM 3 SCHOOL/MAD/MAD-Assignment-TransportMe/app/src/main/res/layout/activity_registration_page.xml\" value=\"0.25\" />\r\n        <entry key=\"..\\:/Users/cyrus/Desktop/MAD-Assignment-TransportMe/app/src/main/res/layout/activity_loading_screen.xml\" value=\"0.15625\" />\r\n        <entry key=\"..\\:/Users/cyrus/Desktop/MAD-Assignment-TransportMe/app/src/main/res/layout/activity_main.xml\" value=\"0.264\" />\r\n        <entry key=\"..\\:/Users/cyrus/Desktop/MAD-Assignment-TransportMe/app/src/main/res/layout/bus_service_layout.xml\" value=\"0.2708333333333333\" />\r\n        <entry key=\"..\\:/Users/cyrus/Desktop/MAD/TransportMe/app/src/main/res/layout/activity_main.xml\" value=\"0.23007246376811594\" />\r\n        <entry key=\"..\\:/Users/voidi/Desktop/MAD/ASG GitHub AGAIN/app/src/main/res/drawable/selector.xml\" value=\"0.1995\" />\r\n        <entry key=\"..\\:/Users/voidi/Desktop/MAD/ASG GitHub AGAIN/app/src/main/res/layout/activity_favourites.xml\" value=\"0.33\" />\r\n        <entry key=\"..\\:/Users/voidi/Desktop/MAD/ASG GitHub AGAIN/app/src/main/res/layout/activity_loading_screen.xml\" value=\"0.18802083333333333\" />\r\n        <entry key=\"..\\:/Users/voidi/Desktop/MAD/ASG GitHub AGAIN/app/src/main/res/layout/activity_main.xml\" value=\"0.2957427536231884\" />\r\n        <entry key=\"..\\:/Users/voidi/Desktop/MAD/ASG GitHub AGAIN/app/src/main/res/layout/activity_main_nav.xml\" value=\"0.35507246376811596\" />\r\n        <entry key=\"..\\:/Users/voidi/Desktop/MAD/ASG GitHub AGAIN/app/src/main/res/layout/activity_search.xml\" value=\"0.35260416666666666\" />\r\n        <entry key=\"..\\:/Users/voidi/Desktop/MAD/ASG GitHub AGAIN/app/src/main/res/layout/activity_settings.xml\" value=\"0.33\" />\r\n        <entry key=\"..\\:/Users/voidi/Desktop/MAD/ASG GitHub AGAIN/app/src/main/res/layout/bus_service_layout.xml\" value=\"0.4796044499381953\" />\r\n        <entry key=\"..\\:/Users/voidi/Desktop/MAD/ASG GitHub AGAIN/app/src/main/res/layout/bus_stop_layout.xml\" value=\"0.33\" />\r\n        <entry key=\"..\\:/Users/voidi/Desktop/MAD/ASG GitHub AGAIN/app/src/main/res/layout/fragment_bus.xml\" value=\"0.35507246376811596\" />\r\n        <entry key=\"..\\:/Users/voidi/Desktop/MAD/ASG GitHub AGAIN/app/src/main/res/layout/fragment_profile.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/Users/voidi/Desktop/MAD/ASG GitHub AGAIN/app/src/main/res/menu/bottom_nav_menu.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/Users/voidi/Desktop/MAD/ASG GitHub AGAIN/app/src/main/res/menu/menu_navigation.xml\" value=\"0.3592592592592593\" />\r\n        <entry key=\"..\\:/Users/voidi/Desktop/MAD/ASG Github/app/src/main/res/layout/activity_main.xml\" value=\"0.17831813576494426\" />\r\n        <entry key=\"..\\:/Users/voidi/Desktop/MAD/ASG Github/app/src/main/res/layout/bus_service_layout.xml\" value=\"0.33\" />\r\n        <entry key=\"..\\:/Users/voidi/Desktop/MAD/ASG Github/app/src/main/res/layout/bus_stop_layout.xml\" value=\"0.33\" />\r\n      </map>\r\n    </option>\r\n  </component>\r\n  <component name=\"ExternalStorageConfigurationManager\" enabled=\"true\" />\r\n  <component name=\"ProjectRootManager\" version=\"2\" languageLevel=\"JDK_11\" default=\"true\" project-jdk-name=\"Android Studio default JDK\" project-jdk-type=\"JavaSDK\">\r\n    <output url=\"file://$PROJECT_DIR$/build/classes\" />\r\n  </component>\r\n  <component name=\"ProjectType\">\r\n    <option name=\"id\" value=\"Android\" />\r\n  </component>\r\n</project>
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/.idea/misc.xml b/.idea/misc.xml
---- a/.idea/misc.xml	(revision 8875bc548f79acbde8b6473784634025c1714ec1)
-+++ b/.idea/misc.xml	(date 1655389728760)
-@@ -3,39 +3,25 @@
-   <component name="DesignSurface">
-     <option name="filePathToZoomLevelMap">
-       <map>
--        <entry key="..\:/#Poly/MAD/MAD-Assignment-TransportMe/app/src/main/res/layout/activity_loading_screen.xml" value="0.14722222222222223" />
--        <entry key="..\:/#Poly/MAD/MAD-Assignment-TransportMe/app/src/main/res/layout/activity_login_page.xml" value="0.358695652173913" />
--        <entry key="..\:/#Poly/MAD/MAD-Assignment-TransportMe/app/src/main/res/layout/activity_registration_page.xml" value="0.358695652173913" />
--        <entry key="..\:/#Poly/MAD/MAD-Assignment-TransportMe/app/src/main/res/layout/bus_service_layout.xml" value="0.18802083333333333" />
--        <entry key="..\:/#Poly/MAD/MAD-Assignment-TransportMe/app/src/main/res/layout/bus_stop_layout.xml" value="0.18802083333333333" />
--        <entry key="..\:/SEM 3 SCHOOL/MAD/MAD-Assignment-TransportMe/app/src/main/res/drawable/edittext_bg.xml" value="0.2985" />
--        <entry key="..\:/SEM 3 SCHOOL/MAD/MAD-Assignment-TransportMe/app/src/main/res/layout/activity_loading_screen.xml" value="0.25" />
--        <entry key="..\:/SEM 3 SCHOOL/MAD/MAD-Assignment-TransportMe/app/src/main/res/layout/activity_login_page.xml" value="0.2" />
--        <entry key="..\:/SEM 3 SCHOOL/MAD/MAD-Assignment-TransportMe/app/src/main/res/layout/activity_registration_page.xml" value="0.25" />
--        <entry key="..\:/Users/cyrus/Desktop/MAD-Assignment-TransportMe/app/src/main/res/layout/activity_loading_screen.xml" value="0.15625" />
-+        <entry key="..\:/Downloads/MAD-Assignment-TransportMe/app/src/main/res/layout/activity_loading_screen.xml" value="0.14722222222222223" />
-+        <entry key="..\:/Downloads/MAD-Assignment-TransportMe/app/src/main/res/layout/activity_login_page.xml" value="0.25" />
-+        <entry key="..\:/Downloads/MAD-Assignment-TransportMe/app/src/main/res/layout/activity_registration_page.xml" value="0.25" />
-+        <entry key="..\:/Users/cyrus/Desktop/MAD-Assignment-TransportMe/app/src/main/res/layout/activity_loading_screen.xml" value="0.264" />
-         <entry key="..\:/Users/cyrus/Desktop/MAD-Assignment-TransportMe/app/src/main/res/layout/activity_main.xml" value="0.264" />
-         <entry key="..\:/Users/cyrus/Desktop/MAD-Assignment-TransportMe/app/src/main/res/layout/bus_service_layout.xml" value="0.2708333333333333" />
-+        <entry key="..\:/Users/cyrus/Desktop/MAD-Assignment-TransportMe/app/src/main/res/layout/bus_stop_layout.xml" value="0.1693840579710145" />
-+        <entry key="..\:/Users/cyrus/Desktop/MAD-Assignment-TransportMe/app/src/main/res/layout/fragment_search.xml" value="0.22826086956521738" />
-+        <entry key="..\:/Users/cyrus/Desktop/MAD-Assignment-TransportMe/app/src/main/res/menu/bottom_nav_menu.xml" value="0.36666666666666664" />
-         <entry key="..\:/Users/cyrus/Desktop/MAD/TransportMe/app/src/main/res/layout/activity_main.xml" value="0.23007246376811594" />
--        <entry key="..\:/Users/voidi/Desktop/MAD/ASG GitHub AGAIN/app/src/main/res/drawable/selector.xml" value="0.1995" />
--        <entry key="..\:/Users/voidi/Desktop/MAD/ASG GitHub AGAIN/app/src/main/res/layout/activity_favourites.xml" value="0.33" />
-         <entry key="..\:/Users/voidi/Desktop/MAD/ASG GitHub AGAIN/app/src/main/res/layout/activity_loading_screen.xml" value="0.18802083333333333" />
--        <entry key="..\:/Users/voidi/Desktop/MAD/ASG GitHub AGAIN/app/src/main/res/layout/activity_main.xml" value="0.2957427536231884" />
--        <entry key="..\:/Users/voidi/Desktop/MAD/ASG GitHub AGAIN/app/src/main/res/layout/activity_main_nav.xml" value="0.35507246376811596" />
--        <entry key="..\:/Users/voidi/Desktop/MAD/ASG GitHub AGAIN/app/src/main/res/layout/activity_search.xml" value="0.35260416666666666" />
--        <entry key="..\:/Users/voidi/Desktop/MAD/ASG GitHub AGAIN/app/src/main/res/layout/activity_settings.xml" value="0.33" />
-         <entry key="..\:/Users/voidi/Desktop/MAD/ASG GitHub AGAIN/app/src/main/res/layout/bus_service_layout.xml" value="0.4796044499381953" />
--        <entry key="..\:/Users/voidi/Desktop/MAD/ASG GitHub AGAIN/app/src/main/res/layout/bus_stop_layout.xml" value="0.33" />
--        <entry key="..\:/Users/voidi/Desktop/MAD/ASG GitHub AGAIN/app/src/main/res/layout/fragment_bus.xml" value="0.35507246376811596" />
--        <entry key="..\:/Users/voidi/Desktop/MAD/ASG GitHub AGAIN/app/src/main/res/layout/fragment_profile.xml" value="0.36666666666666664" />
--        <entry key="..\:/Users/voidi/Desktop/MAD/ASG GitHub AGAIN/app/src/main/res/menu/bottom_nav_menu.xml" value="0.36666666666666664" />
--        <entry key="..\:/Users/voidi/Desktop/MAD/ASG GitHub AGAIN/app/src/main/res/menu/menu_navigation.xml" value="0.3592592592592593" />
-+        <entry key="..\:/Users/voidi/Desktop/MAD/ASG GitHub AGAIN/app/src/main/res/layout/bus_stop_layout.xml" value="0.5" />
-         <entry key="..\:/Users/voidi/Desktop/MAD/ASG Github/app/src/main/res/layout/activity_main.xml" value="0.17831813576494426" />
--        <entry key="..\:/Users/voidi/Desktop/MAD/ASG Github/app/src/main/res/layout/bus_service_layout.xml" value="0.33" />
-+        <entry key="..\:/Users/voidi/Desktop/MAD/ASG Github/app/src/main/res/layout/bus_service_layout.xml" value="0.17831813576494426" />
-         <entry key="..\:/Users/voidi/Desktop/MAD/ASG Github/app/src/main/res/layout/bus_stop_layout.xml" value="0.33" />
-       </map>
-     </option>
-   </component>
--  <component name="ExternalStorageConfigurationManager" enabled="true" />
-   <component name="ProjectRootManager" version="2" languageLevel="JDK_11" default="true" project-jdk-name="Android Studio default JDK" project-jdk-type="JavaSDK">
-     <output url="file://$PROJECT_DIR$/build/classes" />
-   </component>
Index: .idea/shelf/Uncommitted_changes_before_Update_at_16_6_2022_11_35_PM__Default_Changelist_.xml
===================================================================
diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_16_6_2022_11_35_PM__Default_Changelist_.xml b/.idea/shelf/Uncommitted_changes_before_Update_at_16_6_2022_11_35_PM__Default_Changelist_.xml
deleted file mode 100644
--- a/.idea/shelf/Uncommitted_changes_before_Update_at_16_6_2022_11_35_PM__Default_Changelist_.xml	(revision be793fce20e64009a4ea8f7d07aad3e9941bc482)
+++ /dev/null	(revision be793fce20e64009a4ea8f7d07aad3e9941bc482)
@@ -1,4 +0,0 @@
-<changelist name="Uncommitted_changes_before_Update_at_16_6_2022_11_35_PM_[Default_Changelist]" date="1655393757304" recycled="true" deleted="true">
-  <option name="PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Update_at_16_6_2022_11_35_PM_[Default_Changelist]/shelved.patch" />
-  <option name="DESCRIPTION" value="Uncommitted changes before Update at 16/6/2022 11:35 PM [Default Changelist]" />
-</changelist>
\ No newline at end of file
